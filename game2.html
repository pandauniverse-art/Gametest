<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Neon Stack: Fever</title>
<style>
body{margin:0;overflow:hidden;background:#050505;font-family:'Pretendard',sans-serif;touch-action:none}canvas{display:block}
.ui-screen{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background:rgba(0,0,0,0.9);z-index:10}.hidden{display:none}
h1{color:#ff00ff;text-shadow:0 0 20px #f0f;font-size:50px;margin-bottom:20px;font-style:italic}
button{padding:15px 50px;font-size:24px;border:none;border-radius:10px;background:#f0f;color:#fff;cursor:pointer;font-weight:bold}
#hud{position:absolute;top:20px;left:20px;color:white;font-size:20px;font-weight:bold}
#fever-bar{position:absolute;top:60px;left:20px;width:200px;height:10px;background:#333;border:1px solid #fff}
#fever-fill{width:0%;height:100%;background:#ffea00;transition:width 0.2s}
#msg{position:absolute;top:30%;left:50%;transform:translate(-50%,-50%);font-size:50px;font-weight:900;color:#fff;display:none}
.fever-bg{background:linear-gradient(45deg,#220022,#440044)!important}
</style>
</head>
<body>
<a href="index.html" style="position:absolute;top:20px;right:20px;color:#fff;text-decoration:none;border:1px solid #fff;padding:5px 10px;border-radius:5px;z-index:20">üè† HOME</a>
<div id="hud">SCORE: <span id="score">0</span></div>
<div id="fever-bar"><div id="fever-fill"></div></div>
<div id="msg">PERFECT!</div>
<div id="start" class="ui-screen"><h1>NEON STACK</h1><button onclick="init()">PLAY</button></div>
<div id="fail" class="ui-screen hidden"><h1 style="color:red">GAME OVER</h1><button onclick="init()">RETRY</button></div>
<canvas id="c"></canvas>
<script>
const c=document.getElementById('c'),x=c.getContext('2d');
let w,h,boxes,curr,mode,score,speed,dir,camY,combo,fever;
const reset=()=>{w=c.width=window.innerWidth;h=c.height=window.innerHeight};window.onresize=reset;reset();
function init(){
 document.querySelectorAll('.ui-screen').forEach(e=>e.classList.add('hidden'));
 boxes=[{x:w/2-100,y:h-100,w:200,h:50,c:'cyan'}];score=0;speed=3;dir=1;camY=0;combo=0;fever=false;
 updateHUD();spawn();mode='game';loop();
}
function spawn(){
 let prev=boxes[boxes.length-1];
 curr={x:dir==1?-prev.w:w,y:prev.y-50,w:prev.w,h:50,c:`hsl(${(score*10)%360},100%,50%)`};
}
function place(){
 if(mode!='game')return;
 let prev=boxes[boxes.length-1],diff=curr.x-prev.x;
 if(Math.abs(diff)>curr.w){mode='over';document.getElementById('fail').classList.remove('hidden');return}
 if(Math.abs(diff)<5){
  curr.x=prev.x;combo++;showMsg(combo>2?"FEVER!":"PERFECT!");
  if(combo>=3){fever=true;document.body.classList.add('fever-bg');if(curr.w<300)curr.w+=20;}
 }else{
  combo=0;fever=false;document.body.classList.remove('fever-bg');
  if(diff>0)curr.w-=diff;else{curr.w+=diff;curr.x=prev.x}
 }
 boxes.push(curr);score+=fever?2:1;speed+=0.2;if(boxes.length>5)camY+=50;
 updateHUD();spawn();
}
function updateHUD(){
 document.getElementById('score').innerText=score;
 document.getElementById('fever-fill').style.width=Math.min(combo*33.3,100)+'%';
}
function showMsg(txt){
 const m=document.getElementById('msg');m.innerText=txt;m.style.display='block';m.style.textShadow=fever?'0 0 30px gold':'0 0 20px cyan';
 setTimeout(()=>m.style.display='none',500);
}
function loop(){
 if(mode!='game')return;requestAnimationFrame(loop);
 x.fillStyle=fever?'#200':'#050505';x.fillRect(0,0,w,h);
 boxes.forEach(b=>{x.fillStyle=b.c;x.shadowBlur=20;x.shadowColor=b.c;x.fillRect(b.x,b.y-camY,b.w,b.h)});
 curr.x+=speed*dir;if(curr.x>w||curr.x+curr.w<0)dir*=-1;
 x.fillRect(curr.x,curr.y-camY,curr.w,curr.h);x.shadowBlur=0;
}
window.onkeydown=e=>{if(e.code=='Space')place();if(e.code=='Escape')location.href='index.html'};
window.onmousedown=e=>{if(e.target.tagName!='BUTTON')place()};
</script></body></html>
