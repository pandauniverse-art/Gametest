<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Render Rush: v2.0</title>
<style>
/* [Ïä§ÌÉÄÏùº] ÌôîÎ†§Ìïú ÎπÑÏ£ºÏñº & UI */
body{margin:0;overflow:hidden;background:radial-gradient(circle at center,#1a1a2e 0%,#000 100%);font-family:'Pretendard',sans-serif;color:white;user-select:none;touch-action:none}
canvas{display:block}

/* CRT Ìö®Í≥º (ÌïÑÏàò) */
.crt-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(rgba(18,16,16,0)50%,rgba(0,0,0,0.1)50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,255,0.06));background-size:100% 3px,3px 100%;pointer-events:none;z-index:999}

/* UI Î†àÏù¥Ïñ¥ */
.ui-screen{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background:rgba(0,0,0,0.85);z-index:100}
.hidden{display:none!important}
.glass-panel{background:rgba(20,20,30,0.8);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.2);border-radius:20px;padding:40px;text-align:center;width:90%;max-width:500px;box-shadow:0 0 30px rgba(0,229,255,0.3)}

/* Ï†úÎ™©Ïóê Î≤ÑÏ†Ñ ÌëúÏãú */
h1{font-size:40px;margin:0 0 20px;color:#00e5ff;text-shadow:0 0 10px #00e5ff}
.ver-tag{font-size:20px;color:#ff2a6d;vertical-align:middle;margin-left:10px;background:#fff;padding:2px 8px;border-radius:5px}

button{padding:15px 40px;font-size:20px;font-weight:bold;border:none;border-radius:50px;cursor:pointer;background:#00e5ff;color:#000;box-shadow:0 0 15px #00e5ff;margin-top:20px}
#back-btn{position:absolute;top:20px;right:20px;padding:10px 20px;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.3);color:white;text-decoration:none;border-radius:20px;z-index:1000}

/* HUD */
#hud-layer{position:absolute;top:20px;left:20px;z-index:10;pointer-events:none}
.hud-text{font-size:24px;font-weight:bold;text-shadow:0 0 5px black}
#score{color:#00e5ff}
#hp{margin-top:5px;font-size:20px;letter-spacing:3px}

/* Î≥¥Ïä§ HUD */
#boss-hud{position:absolute;top:80px;left:50%;transform:translateX(-50%);width:60%;display:none;z-index:10}
#boss-hp-bar{width:100%;height:10px;background:#333;border:2px solid white;border-radius:5px;overflow:hidden}
#boss-hp-fill{width:100%;height:100%;background:linear-gradient(90deg,#ff0055,#ff5500);transition:width 0.1s}

/* Ïä§ÌÇ¨ Ïπ¥Îìú (Î°úÍ∑∏ÎùºÏù¥ÌÅ¨) */
.card-container{display:flex;gap:15px;justify-content:center;flex-wrap:wrap;margin-top:20px}
.skill-card{background:linear-gradient(135deg,#222,#333);border:2px solid #555;border-radius:15px;padding:15px;width:100px;cursor:pointer;transition:0.2s}
.skill-card:hover{transform:scale(1.1);border-color:#00e5ff;box-shadow:0 0 20px rgba(0,229,255,0.5)}
.skill-icon{font-size:40px;margin-bottom:10px}
.skill-name{font-size:14px;font-weight:bold;color:white}
.skill-desc{font-size:10px;color:#aaa;margin-top:5px}
</style>
</head>
<body>
<div class="crt-overlay"></div>
<a href="index.html" id="back-btn">üè† HOME</a>

<div id="hud-layer">
 <div class="hud-text">SCORE: <span id="score">0</span></div>
 <div id="hp">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
</div>

<div id="boss-hud">
 <div style="text-align:center;color:#ff0055;font-weight:bold;margin-bottom:5px">WARNING: BOSS</div>
 <div id="boss-hp-bar"><div id="boss-hp-fill"></div></div>
</div>

<div id="start-screen" class="ui-screen">
 <div class="glass-panel">
  <h1>RENDER RUSH <span class="ver-tag">v2.0</span></h1>
  <p>Hold Click to Shoot<br>500 PTS = Level Up!</p>
  <button onclick="startGame()">START RENDER</button>
 </div>
</div>

<div id="levelup-screen" class="ui-screen hidden">
 <div class="glass-panel">
  <h1>LEVEL UP!</h1>
  <p>Choose an Upgrade</p>
  <div class="card-container" id="skill-cards"></div>
 </div>
</div>

<div id="pause-screen" class="ui-screen hidden">
 <div class="glass-panel">
  <h1>PAUSED</h1>
  <button onclick="togglePause()">RESUME</button>
  <button onclick="location.href='index.html'" style="background:#444;box-shadow:none">EXIT</button>
 </div>
</div>

<div id="fail-screen" class="ui-screen hidden"><div class="glass-panel"><h1 style="color:red">SYSTEM CRASH</h1><button onclick="startGame()">RETRY</button></div></div>
<div id="clear-screen" class="ui-screen hidden"><div class="glass-panel"><h1 style="color:#0f0">RENDER DONE</h1><button onclick="startGame()">NEW WORK</button></div></div>

<canvas id="canvas"></canvas>

<script>
const cvs=document.getElementById('canvas'),ctx=cvs.getContext('2d');
let w,h,state,player,entities,mouse={x:0,y:0,down:false};

const SKILLS=[
 {id:'multi',name:'Multi Shot',icon:'üî±',desc:'+1 Projectile'},
 {id:'dmg',name:'Power Up',icon:'üí™',desc:'+10 Damage'},
 {id:'speed',name:'Rapid Fire',icon:'‚ö°',desc:'+Fire Rate'},
 {id:'heal',name:'Repair',icon:'‚ù§Ô∏è',desc:'+1 HP'}
];

function resize(){w=cvs.width=window.innerWidth;h=cvs.height=window.innerHeight}window.addEventListener('resize',resize);resize();

// ÏûÖÎ†•
window.onmousemove=e=>{mouse.x=e.clientX;mouse.y=e.clientY};
window.onmousedown=()=>mouse.down=true; window.onmouseup=()=>mouse.down=false;
window.onkeydown=e=>{if(e.key==='Escape')togglePause()};
cvs.addEventListener('touchmove',e=>{e.preventDefault();mouse.x=e.touches[0].clientX;mouse.y=e.touches[0].clientY},{passive:false});
cvs.addEventListener('touchstart',e=>{mouse.down=true;mouse.x=e.touches[0].clientX;mouse.y=e.touches[0].clientY},{passive:false});
cvs.addEventListener('touchend',()=>mouse.down=false);

function startGame(){
 document.querySelectorAll('.ui-screen').forEach(e=>e.classList.add('hidden'));
 document.getElementById('boss-hud').style.display='none';
 document.body.style.cursor='none';
 
 state={run:true,paused:false,score:0,frame:0,nextSkill:500};
 player={x:w/2,y:h/2,hp:5,invin:0,dmg:10,rate:1,multi:1};
 entities={enemies:[],missiles:[],stars:[],boss:null};
 
 for(let i=0;i<50;i++)entities.stars.push({x:Math.random()*w,y:Math.random()*h,s:Math.random()*2,v:Math.random()*2+0.5});
 updateHUD(); loop();
}

function togglePause(){
 if(!state.run)return;
 state.paused=!state.paused;
 const s=document.getElementById('pause-screen');
 if(state.paused){s.classList.remove('hidden');document.body.style.cursor='default'}
 else{s.classList.add('hidden');document.body.style.cursor='none';loop()}
}

// Î†àÎ≤®ÏóÖ ÏãúÏä§ÌÖú (ÌïµÏã¨)
function triggerLevelUp(){
 state.paused=true; document.body.style.cursor='default';
 const sc=document.getElementById('levelup-screen'),cc=document.getElementById('skill-cards');
 cc.innerHTML=''; sc.classList.remove('hidden');
 
 [...SKILLS].sort(()=>Math.random()-0.5).slice(0,3).forEach(s=>{
  let d=document.createElement('div');d.className='skill-card';
  d.innerHTML=`<div class="skill-icon">${s.icon}</div><div class="skill-name">${s.name}</div><div class="skill-desc">${s.desc}</div>`;
  d.onclick=()=>selectSkill(s.id);
  cc.appendChild(d);
 });
}

function selectSkill(id){
 if(id=='multi')player.multi++;
 if(id=='dmg')player.dmg+=10;
 if(id=='speed')player.rate++;
 if(id=='heal'&&player.hp<5){player.hp++;updateHUD();}
 
 document.getElementById('levelup-screen').classList.add('hidden');
 state.nextSkill+=500; state.paused=false; document.body.style.cursor='none'; loop();
}

function loop(){
 if(!state.run||state.paused)return;
 requestAnimationFrame(loop); state.frame++;

 // Î∞∞Í≤Ω
 ctx.fillStyle='#121212';ctx.fillRect(0,0,w,h);
 ctx.fillStyle='rgba(255,255,255,0.5)';
 entities.stars.forEach(s=>{s.y+=s.v;if(s.y>h)s.y=0;ctx.beginPath();ctx.arc(s.x,s.y,s.s,0,6.28);ctx.fill()});

 // ÌîåÎ†àÏù¥Ïñ¥
 player.x+=(mouse.x-player.x)*0.2; player.y+=(mouse.y-player.y)*0.2;
 if(player.invin>0)player.invin--;
 ctx.globalAlpha=player.invin>0?0.5:1;
 ctx.font='40px serif';ctx.fillText('üöÄ',player.x,player.y);
 ctx.globalAlpha=1;

 // Î∞úÏÇ¨
 if(mouse.down&&state.frame%Math.max(5,20-player.rate*2)==0){
  for(let i=0;i<player.multi;i++){
   let angle=(i-(player.multi-1)/2)*0.2;
   entities.missiles.push({x:player.x,y:player.y-20,vx:Math.sin(angle)*15,vy:-Math.cos(angle)*15,dmg:player.dmg});
  }
 }

 // Î†àÎ≤®ÏóÖ Ï≤¥ÌÅ¨
 if(state.score>=state.nextSkill&&!entities.boss){triggerLevelUp();return;}

 // Î≥¥Ïä§ Îì±Ïû•
 if(state.score>=2000&&!entities.boss){
  entities.boss={x:w/2,y:-100,hp:1500,max:1500,vx:2,vy:1};
  document.getElementById('boss-hud').style.display='block';
 }

 // Ï†Å ÏÉùÏÑ±
 if(!entities.boss&&state.frame%40==0) entities.enemies.push({x:Math.random()*w,y:-50,hp:20+(state.score/100),s:3});

 // ÎØ∏ÏÇ¨Ïùº
 ctx.font='20px serif';ctx.textAlign='center';ctx.textBaseline='middle';
 entities.missiles.forEach((m,i)=>{
  m.x+=m.vx;m.y+=m.vy;ctx.fillText('üî•',m.x,m.y);
  if(m.y<-50||m.x<-50||m.x>w+50)entities.missiles.splice(i,1);
 });

 // Ï†Å Ï≤òÎ¶¨
 entities.enemies.forEach((e,i)=>{
  e.y+=e.s; ctx.fillText('üëæ',e.x,e.y);
  if(Math.hypot(e.x-player.x,e.y-player.y)<40){takeDamage();entities.enemies.splice(i,1)}
  entities.missiles.forEach((m,j)=>{
   if(Math.hypot(e.x-m.x,e.y-m.y)<30){
    e.hp-=m.dmg; entities.missiles.splice(j,1);
    if(e.hp<=0){entities.enemies.splice(i,1);state.score+=10;updateHUD();}
   }
  });
  if(e.y>h)entities.enemies.splice(i,1);
 });

 // Î≥¥Ïä§Ï†Ñ
 if(entities.boss){
  let b=entities.boss;
  if(b.y<100)b.y+=2;
  else{
   b.x+=b.vx; if(b.x<50||b.x>w-50)b.vx*=-1;
   if(state.frame%60==0)entities.enemies.push({x:b.x,y:b.y,hp:1,s:6});
  }
  ctx.font='100px serif';ctx.fillText('üëπ',b.x,b.y);
  document.getElementById('boss-hp-fill').style.width=(b.hp/b.max*100)+'%';
  
  if(Math.hypot(b.x-player.x,b.y-player.y)<80)takeDamage();
  
  entities.missiles.forEach((m,i)=>{
   if(Math.hypot(m.x-b.x,m.y-b.y)<60){
    b.hp-=m.dmg; entities.missiles.splice(i,1);
    if(b.hp<=0)gameClear();
   }
  });
 }
}

function takeDamage(){
 if(player.invin>0)return;
 player.hp--; player.invin=60; updateHUD();
 document.body.style.transform='translate(5px,5px)';
 setTimeout(()=>document.body.style.transform='none',100);
 if(player.hp<=0){state.run=false;document.getElementById('fail-screen').classList.remove('hidden');document.body.style.cursor='default';}
}

function updateHUD(){
 document.getElementById('score').innerText=state.score;
 let h='';for(let i=0;i<player.hp;i++)h+='‚ù§Ô∏è';for(let i=player.hp;i<5;i++)h+='üñ§';
 document.getElementById('hp').innerText=h;
}

function gameClear(){
 state.run=false; document.getElementById('clear-screen').classList.remove('hidden');
 document.body.style.cursor='default';
}
</script></body></html>
