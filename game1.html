<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Render Rush: Roguelike</title>
<style>
body{margin:0;overflow:hidden;background:#121212;font-family:'Pretendard',sans-serif;color:white;user-select:none;-webkit-user-select:none;touch-action:none}canvas{display:block}.ui-screen{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background:rgba(0,0,0,0.9);z-index:100}.hidden{display:none!important}.glass-panel{background:rgba(20,20,30,0.8);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.2);border-radius:20px;padding:30px;text-align:center;width:80%;max-width:400px}h1{font-size:8vmin;margin:0 0 20px;background:linear-gradient(to right,#00e5ff,#2979ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent}button{padding:15px 40px;font-size:20px;font-weight:bold;border:none;border-radius:50px;cursor:pointer;background:#00e5ff;color:#000;margin-top:10px}#hud-layer{position:absolute;top:20px;left:20px;pointer-events:none}#levelup-screen{z-index:200;background:rgba(0,0,0,0.95)}.card-container{display:flex;gap:10px;justify-content:center;flex-wrap:wrap}.skill-card{background:#222;border:2px solid #444;border-radius:10px;padding:20px;width:100px;cursor:pointer;transition:0.2s}.skill-card:hover{border-color:#00e5ff;transform:scale(1.05)}.skill-icon{font-size:40px;margin-bottom:10px}.skill-name{font-size:14px;font-weight:bold}#back-btn{position:absolute;top:20px;right:20px;padding:10px 20px;background:rgba(255,255,255,0.2);color:white;text-decoration:none;border-radius:20px;backdrop-filter:blur(5px);z-index:999}#boss-hud{position:absolute;top:60px;left:50%;transform:translateX(-50%);width:80%;max-width:600px;display:none}#boss-hp-bar{width:100%;height:10px;background:linear-gradient(90deg,#ff2a6d,#ff5252)}
</style>
</head>
<body>
<a href="index.html" id="back-btn">üè† HOME</a>
<div id="boss-hud"><div style="background:#333;height:10px"><div id="boss-hp-bar"></div></div></div>
<div id="hud-layer"><h2>SCORE: <span id="score">0</span></h2><div id="hp">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div></div>
<div id="start-screen" class="ui-screen"><div class="glass-panel"><h1>RENDER RUSH</h1><p>Roguelike Update</p><button onclick="startGame()">START</button></div></div>
<div id="levelup-screen" class="ui-screen hidden"><h1>LEVEL UP!</h1><p>Choose an Upgrade</p><div class="card-container" id="skill-cards"></div></div>
<div id="fail-screen" class="ui-screen hidden"><div class="glass-panel"><h1 style="color:red">FAIL</h1><button onclick="startGame()">RETRY</button></div></div>
<div id="clear-screen" class="ui-screen hidden"><div class="glass-panel"><h1 style="color:#0f0">CLEAR</h1><button onclick="startGame()">AGAIN</button></div></div>
<canvas id="canvas"></canvas>
<script>
const cvs=document.getElementById('canvas'),ctx=cvs.getContext('2d');
let w,h,state,player,enemies=[],missiles=[],boss=null,stars=[],animId;
const SKILLS=[{id:'multi',icon:'üî±',name:'Multi Shot'},{id:'dmg',icon:'üí™',name:'Damage Up'},{id:'speed',icon:'‚ö°',name:'Fire Rate'}];
function resize(){w=cvs.width=window.innerWidth;h=cvs.height=window.innerHeight}window.addEventListener('resize',resize);resize();
for(let i=0;i<50;i++)stars.push({x:Math.random()*w,y:Math.random()*h,s:Math.random()*2,v:Math.random()*2});
function startGame(){
 document.querySelectorAll('.ui-screen').forEach(e=>e.classList.add('hidden'));
 state={run:true,score:0,levelScore:500,mouse:{x:w/2,y:h/2},click:false,frame:0};
 player={x:w/2,y:h/2,hp:5,invin:0,dmg:10,rate:1,multi:1};
 enemies=[];missiles=[];boss=null;updateHUD();loop();
}
function loop(){
 if(!state.run)return;animId=requestAnimationFrame(loop);state.frame++;
 ctx.fillStyle='#121212';ctx.fillRect(0,0,w,h);
 ctx.fillStyle='#fff';stars.forEach(s=>{s.y+=s.v;if(s.y>h)s.y=0;ctx.beginPath();ctx.arc(s.x,s.y,s.s,0,6.28);ctx.fill()});
 if(state.click&&state.frame%Math.max(5,30-player.rate*5)==0){
  for(let i=0;i<player.multi;i++){
   let angle=(i-(player.multi-1)/2)*0.2;
   missiles.push({x:state.mouse.x,y:state.mouse.y-20,vx:Math.sin(angle)*15,vy:-Math.cos(angle)*15,dmg:player.dmg});
  }
 }
 if(state.score>=state.levelScore&&!boss){state.run=false;showLevelUp();}
 if(!boss&&state.score>=2000){boss={x:w/2,y:100,hp:1000,max:1000,vx:2};document.getElementById('boss-hud').style.display='block';}
 if(state.frame%40==0&&!boss)enemies.push({x:Math.random()*w,y:-50,hp:20,s:3});
 ctx.font='40px serif';ctx.fillText('üöÄ',state.mouse.x,state.mouse.y);
 missiles.forEach((m,i)=>{m.x+=m.vx;m.y+=m.vy;ctx.fillText('üî•',m.x,m.y);if(m.y<-50)missiles.splice(i,1)});
 enemies.forEach((e,i)=>{e.y+=e.s;ctx.fillText('üëæ',e.x,e.y);
  if(Math.hypot(e.x-state.mouse.x,e.y-state.mouse.y)<40)hitPlayer();
  missiles.forEach((m,j)=>{if(Math.hypot(e.x-m.x,e.y-m.y)<30){e.hp-=m.dmg;missiles.splice(j,1);if(e.hp<=0){enemies.splice(i,1);state.score+=10;updateHUD()}}});
  if(e.y>h)enemies.splice(i,1);
 });
 if(boss){
  boss.x+=boss.vx;if(boss.x<50||boss.x>w-50)boss.vx*=-1;
  ctx.font='100px serif';ctx.fillText('üëπ',boss.x,boss.y);
  document.getElementById('boss-hp-bar').style.width=(boss.hp/boss.max*100)+'%';
  missiles.forEach((m,i)=>{if(Math.hypot(m.x-boss.x,m.y-boss.y)<60){boss.hp-=m.dmg;missiles.splice(i,1);if(boss.hp<=0)win()}});
 }
 if(player.invin>0)player.invin--;
}
function hitPlayer(){if(player.invin>0)return;player.hp--;player.invin=60;updateHUD();if(player.hp<=0)fail();}
function updateHUD(){document.getElementById('score').innerText=state.score;let h='';for(let i=0;i<player.hp;i++)h+='‚ù§Ô∏è';document.getElementById('hp').innerText=h;}
function showLevelUp(){
 document.getElementById('levelup-screen').classList.remove('hidden');
 const con=document.getElementById('skill-cards');con.innerHTML='';
 SKILLS.sort(()=>Math.random()-0.5).slice(0,3).forEach(s=>{
  let d=document.createElement('div');d.className='skill-card';
  d.innerHTML=`<div class="skill-icon">${s.icon}</div><div class="skill-name">${s.name}</div>`;
  d.onclick=()=>{applySkill(s.id);document.getElementById('levelup-screen').classList.add('hidden');state.levelScore+=500;state.run=true;loop()};
  con.appendChild(d);
 });
}
function applySkill(id){if(id=='multi')player.multi++;if(id=='dmg')player.dmg+=10;if(id=='speed')player.rate++;}
function fail(){state.run=false;document.getElementById('fail-screen').classList.remove('hidden');}
function win(){state.run=false;document.getElementById('clear-screen').classList.remove('hidden');}
window.onmousemove=e=>{if(state)state.mouse={x:e.clientX,y:e.clientY}};window.onmousedown=()=>state.click=true;window.onmouseup=()=>state.click=false;
document.addEventListener('touchmove',e=>{e.preventDefault();state.mouse={x:e.touches[0].clientX,y:e.touches[0].clientY}},{passive:false});
document.addEventListener('touchstart',e=>{state.click=true;state.mouse={x:e.touches[0].clientX,y:e.touches[0].clientY}},{passive:false});
document.addEventListener('touchend',()=>state.click=false);
</script></body></html>
